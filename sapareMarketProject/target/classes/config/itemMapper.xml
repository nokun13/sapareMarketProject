<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
<mapper namespace="item">
	
	<insert id="crawlingProcess" parameterType="dto.itemDTO">
		insert into SAPAREITEM values(SAPAREITEM_ITEMID_seq.nextval, #{memberName}, #{itemPrice}, #{itemAbout}, #{itemViewCnt}, #{itemName}, #{itemImagePath}, #{itemStatus}, sysdate, #{itemType}, #{itemWantCnt}, #{itemFlagCnt})
	</insert>
	
	<select id="selectProcess" resultType="dto.itemDTO">
		select * from sapareItem
	</select>
	
	<select id="get" parameterType="dto.memberDTO" resultType="dto.itemDTO">
		select a.*, b.orderDate, b.orderPrice, c.reviewNo, c.reviewContent, c.reviewStar, d.profileImg, d.nickname
		from sapareItem a
		left outer join
		    sapareOrder b on a.itemId = b.itemId
		left outer join
		    sapareReview c on b.orderId = c.orderId
		left outer join
		    sapareMember d on b.memberName = d.memberName
		where a.memberName=#{memberName}
		order by a.itemId desc
	</select>
	
</mapper>